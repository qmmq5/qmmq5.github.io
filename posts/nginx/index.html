<!DOCTYPE html>
<html lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8"><meta name="generator" content="Hugo 0.146.3"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="color-scheme" content="light dark">
<meta name="supported-color-schemes" content="light dark"><meta name="description" content="Proxy server
Forward proxy

Primiarily serves clients
used for anonymity, content filtering, bypassing restrictions

Reverse proxy

Primiarily serves servers
used for load balancing, caching, SSL termination, enhancing sercurity


The usage of nginx
The functionalities of Nginx as a proxy server


load balancing

  
      
          static
          dynamic
      
  
  
      
          round robin
          least connection method
      
      
          weighted round-robin
          least response time method
      
      
          source ip hash
          
      
  

http {
   upstream [] {
       server ...
       server ...
       server ...
   }

    server {
        ...
    }
}


caching (without request to server and database)"><title>Nginx&nbsp;&ndash;&nbsp;QQQ</title><link rel="stylesheet" href="/css/core.min.003a667cf21024ef30f2985fb57c9bd6f6873cf899ee14e9302e68e9f04b681df9440cec4ebdaa101dca533a262c242f.css" integrity="sha384-ADpmfPIQJO8w8phftXyb1vaHPPiZ7hTpMC5o6fBLaB35RAzsTr2qEB3KUzomLCQv"><meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Nginx" /><body><section id="header">
    <div class="header wrap"><span class="header left-side"><a class="site home" href="/"><span class="site name">QQQ</span></a></span>
        <span class="header right-side"><div class="nav wrap"><nav class="nav"><a class="nav item" href="/categories/">Categories</a><a class="nav item" href="/tags/">Tags</a><a class="nav item" href="/about">About</a></nav></div></span></div><div class="site slogan"><span class="title">maxwell and minikube</span></div></section><section id="content"><div class="article-container"><section class="article header">
    <h1 class="article title">Nginx</h1><p class="article date">Sunday, March 9, 2025<span class="lastmod"> • edited Thursday, April 17, 2025</span></p></section><article class="article markdown-body"><h3 id="proxy-server">Proxy server</h3>
<p>Forward proxy</p>
<ol>
<li>Primiarily serves clients</li>
<li>used for anonymity, content filtering, bypassing restrictions</li>
</ol>
<p>Reverse proxy</p>
<ol>
<li>Primiarily serves servers</li>
<li>used for load balancing, caching, SSL termination, enhancing sercurity</li>
</ol>
<hr>
<h3 id="the-usage-of-nginx">The usage of nginx</h3>
<p>The functionalities of Nginx as a proxy server</p>
<ol>
<li>
<p>load balancing</p>
<table>
  <thead>
      <tr>
          <th>static</th>
          <th>dynamic</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>round robin</td>
          <td>least connection method</td>
      </tr>
      <tr>
          <td>weighted round-robin</td>
          <td>least response time method</td>
      </tr>
      <tr>
          <td>source ip hash</td>
          <td></td>
      </tr>
  </tbody>
</table>
<pre tabindex="0"><code>http {
   upstream [] {
       server ...
       server ...
       server ...
   }

    server {
        ...
    }
}
</code></pre></li>
<li>
<p>caching (without request to server and database)</p>
</li>
<li>
<p>security</p>
</li>
<li>
<p>compression and segmentation</p>
</li>
</ol>
<p>Nginx:</p>
<ol>
<li>Load balancing across multiple servers</li>
<li>High performance web server (ideal for serving static content)</li>
<li>Reverse proxy forwarding to appropriate back-end server</li>
<li>sercurity features (SSL termination)</li>
</ol>
<p>Nginx can be used as an ingress controller in kubernetes</p>
<p>Node.js:</p>
<ol>
<li>Load balancing across multiple CPU cores.</li>
<li>Express.js is a server framework for Node.js</li>
<li>Used to build dynamic web apps and APIs by defining routing logic</li>
<li>Build custom middleware (managing Gzip compression)</li>
</ol>
<p>brief details for node.js</p>
<p>Node is a cross-platform, open-source javascript runtime environment</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1200/1*iTdvBPVxYZdJZQKsP3yILw.jpeg"><br>
source [https://miro.medium.com/v2/resize:fit:1200/1*iTdvBPVxYZdJZQKsP3yILw.jpeg]</p>
<hr>
<h3 id="nginx-configuration-file">Nginx configuration file</h3>
<p>mine types : the default file already included most of format used in the web. (css,html,jpg)</p>
<p>location context: alias can be used to direct absolute path.</p>
<p>load balancer: the default algorithm is round robin. Using docker to create 4 servers to test the load balancing status.</p>
<ol>
<li>Using express.js to build a simple backend server to show some message on browser, and dockerizing the file to build an image.</li>
</ol>
<p><img loading="lazy"  src="https://github.com/qmmq5/qmmq5.github.io/blob/main/assets/img/1.png?raw=true"
        alt="image"/></p>
<ol start="2">
<li>Mapping the server to 4 different ports through docker</li>
</ol>
<p><img loading="lazy"  src="https://github.com/qmmq5/qmmq5.github.io/blob/main/assets/img/2.png?raw=true"
        alt="image"/></p>
<ol start="3">
<li>Modify the nginx.conf with the above code format and write a access_log to check the status of load balancer.</li>
</ol>
<pre tabindex="0"><code>http{
    include       mime.types;

    upstream backendserver{
        server 127.0.0.1:1111;
        server 127.0.0.1:2222;
        server 127.0.0.1:3333;
        server 127.0.0.1:4444;
    }

    log_format upstreamlog &#39;$server_name to: $upstream_addr {$request} &#39;
        &#39;upstream_response_time $upstream_response_time&#39;
        &#39; request_time $request_time&#39;;

    server {
        listen 8080;
        root /mysite;
        # server_name  localhost;

        access_log logs/nginx-access.log upstreamlog;
    }

}
</code></pre><p><img loading="lazy"  src="https://github.com/qmmq5/qmmq5.github.io/blob/main/assets/img/3.png?raw=true"
        alt="image"/></p>
</article><section class="article labels"><a class="category" href=/categories/devops/>DevOps</a></section><section class="article author"><img alt="" loading="lazy" class="avatar" src="/img/avatar.jpg"/><div class="details"><a class="item" href="https://github.com/qmmq5" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-github"></span>&nbsp;qmmq5</a><a class="item" href="mailto:XXX@mail.com" target="_blank" rel="noopener noreferrer"><span class="iconfont icon-email"></span>&nbsp;XXX@mail.com</a></div>
</section>
</div>
<div class="article bottom"><section class="article navigation"><p><a class="link" href="/posts/github-deployment/"><span class="iconfont icon-article"></span>Hugo usage</a></p><p><a class="link" href="/posts/first-post/"><span class="iconfont icon-article"></span>Observation</a></p></section></div><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hugo Music Player</title>
    <style>
         
        .music-player {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .music-player:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .music-player.minimized {
            width: 60px;
            height: 60px;
            padding: 10px;
            overflow: hidden;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            cursor: move;
            padding: 5px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .player-header:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .drag-handle {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .drag-icon {
            font-size: 14px;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .player-header:hover .drag-icon {
            opacity: 1;
        }

        .player-title {
            font-size: 12px;
            font-weight: 600;
            opacity: 0.8;
        }

        .minimize-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 14px;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .minimize-btn:hover {
            opacity: 1;
        }

        .song-info {
            text-align: center;
            margin-bottom: 15px;
        }

        .song-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-artist {
            font-size: 12px;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .progress-container {
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d);
            width: 0%;
            transition: width 0.1s linear;
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            margin-top: 5px;
            opacity: 0.7;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }

        .play-btn {
            font-size: 20px;
            background: rgba(255, 255, 255, 0.1);
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .volume-slider {
            flex: 1;
            height: 3px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
        }

        .volume-slider::-moz-range-thumb {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            border: none;
        }

        .volume-icon {
            font-size: 12px;
            opacity: 0.7;
        }

         
        .minimized .player-content {
            display: none;
        }

        .minimized .minimize-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

         
        .demo-content {
            padding: 100px 20px;
            text-align: center;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .demo-content h1 {
            margin-bottom: 20px;
            font-size: 2.5rem;
        }

        .demo-content p {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    
 

    
    <div class="music-player" id="musicPlayer">
        <div class="player-header" id="dragHandle">
            <div class="drag-handle">
                <span class="drag-icon">⋮⋮</span>
                <span class="player-title">NOW PLAYING</span>
            </div>
            <button class="minimize-btn" onclick="toggleMinimize()" id="minimizeBtn">−</button>
        </div>
        
        <div class="player-content" id="playerContent">
            <div class="song-info">
                <div class="song-title" id="songTitle">Awesome Track</div>
                <div class="song-artist" id="songArtist">Great Artist</div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" onclick="seekTo(event)">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="time-info">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">3:24</span>
                </div>
            </div>

            <div class="controls">
                <button class="control-btn" onclick="previousTrack()">⏮</button>
                <button class="control-btn play-btn" onclick="togglePlay()" id="playBtn">▶</button>
                <button class="control-btn" onclick="nextTrack()">⏭</button>
            </div>

            <div class="volume-container">
                <span class="volume-icon">🔊</span>
                <input type="range" class="volume-slider" min="0" max="100" value="70" onchange="setVolume(this.value)">
            </div>
        </div>
    </div>

    <script>
        let isPlaying = false;
        let isMinimized = false;
        let currentTime = 0;
        let totalTime = 204; 
        let volume = 70;
        let progressInterval;

        
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        
        const playlist = [
            { title: "Awesome Track", artist: "Great Artist", duration: 204 },
            { title: "Another Song", artist: "Cool Band", duration: 187 },
            { title: "Third Track", artist: "Music Maker", duration: 234 }
        ];
        let currentTrack = 0;

        function togglePlay() {
            isPlaying = !isPlaying;
            const playBtn = document.getElementById('playBtn');
            
            if (isPlaying) {
                playBtn.innerHTML = '⏸';
                startProgress();
            } else {
                playBtn.innerHTML = '▶';
                stopProgress();
            }
        }

        function startProgress() {
            progressInterval = setInterval(() => {
                if (currentTime < totalTime) {
                    currentTime++;
                    updateProgress();
                } else {
                    nextTrack();
                }
            }, 1000);
        }

        function stopProgress() {
            clearInterval(progressInterval);
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const currentTimeEl = document.getElementById('currentTime');
            
            const progress = (currentTime / totalTime) * 100;
            progressFill.style.width = progress + '%';
            currentTimeEl.textContent = formatTime(currentTime);
        }

        function seekTo(event) {
            const progressBar = event.currentTarget;
            const clickX = event.offsetX;
            const width = progressBar.offsetWidth;
            const newTime = (clickX / width) * totalTime;
            
            currentTime = Math.floor(newTime);
            updateProgress();
        }

        function setVolume(value) {
            volume = value;
            
        }

        function previousTrack() {
            currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
            loadTrack();
        }

        function nextTrack() {
            currentTrack = (currentTrack + 1) % playlist.length;
            loadTrack();
        }

        function loadTrack() {
            const track = playlist[currentTrack];
            document.getElementById('songTitle').textContent = track.title;
            document.getElementById('songArtist').textContent = track.artist;
            document.getElementById('totalTime').textContent = formatTime(track.duration);
            
            currentTime = 0;
            totalTime = track.duration;
            updateProgress();
            
            if (isPlaying) {
                stopProgress();
                startProgress();
            }
        }

        function toggleMinimize() {
            const player = document.getElementById('musicPlayer');
            const btn = document.getElementById('minimizeBtn');
            
            isMinimized = !isMinimized;
            
            if (isMinimized) {
                player.classList.add('minimized');
                btn.innerHTML = '+';
            } else {
                player.classList.remove('minimized');
                btn.innerHTML = '−';
            }
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        
        function initializeDragging() {
            const player = document.getElementById('musicPlayer');
            const dragHandle = document.getElementById('dragHandle');

            dragHandle.addEventListener('mousedown', startDragging);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDragging);

            
            dragHandle.addEventListener('touchstart', startDraggingTouch);
            document.addEventListener('touchmove', dragTouch);
            document.addEventListener('touchend', stopDragging);
        }

        function startDragging(e) {
            e.preventDefault();
            isDragging = true;
            const player = document.getElementById('musicPlayer');
            const rect = player.getBoundingClientRect();
            
            dragOffset.x = e.clientX - rect.left;
            dragOffset.y = e.clientY - rect.top;
            
            player.style.transition = 'none';
            document.body.style.userSelect = 'none';
        }

        function startDraggingTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            isDragging = true;
            const player = document.getElementById('musicPlayer');
            const rect = player.getBoundingClientRect();
            
            dragOffset.x = touch.clientX - rect.left;
            dragOffset.y = touch.clientY - rect.top;
            
            player.style.transition = 'none';
        }

        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            
            const player = document.getElementById('musicPlayer');
            const newX = e.clientX - dragOffset.x;
            const newY = e.clientY - dragOffset.y;
            
            
            const maxX = window.innerWidth - player.offsetWidth;
            const maxY = window.innerHeight - player.offsetHeight;
            
            const boundedX = Math.max(0, Math.min(newX, maxX));
            const boundedY = Math.max(0, Math.min(newY, maxY));
            
            player.style.left = boundedX + 'px';
            player.style.bottom = 'auto';
            player.style.top = boundedY + 'px';
        }

        function dragTouch(e) {
            if (!isDragging) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            const player = document.getElementById('musicPlayer');
            const newX = touch.clientX - dragOffset.x;
            const newY = touch.clientY - dragOffset.y;
            
            
            const maxX = window.innerWidth - player.offsetWidth;
            const maxY = window.innerHeight - player.offsetHeight;
            
            const boundedX = Math.max(0, Math.min(newX, maxX));
            const boundedY = Math.max(0, Math.min(newY, maxY));
            
            player.style.left = boundedX + 'px';
            player.style.bottom = 'auto';
            player.style.top = boundedY + 'px';
        }

        function stopDragging() {
            if (!isDragging) return;
            
            isDragging = false;
            const player = document.getElementById('musicPlayer');
            player.style.transition = 'all 0.3s ease';
            document.body.style.userSelect = '';
        }

        
        loadTrack();
        initializeDragging();
    </script>
</body>
</html></section><section id="footer"><div class="footer-wrap">
    <p class="copyright">©2025 Notepadium.</p>
    <p class="powerby"><span>Powered&nbsp;by&nbsp;</span><a href="https://gohugo.io" 
        target="_blank" rel="noopener noreferrer">Hugo</a><span>&nbsp;&amp;&nbsp;</span><a href="https://themes.gohugo.io/hugo-notepadium/" 
        target="_blank" rel="noopener noreferrer">Notepadium</a>
<a href='https://ipv6-test.com/validate.php?url=referer'
  ><img loading="lazy" src='https://ipv6-test.com/button-ipv6-80x15.png' 
        alt='ipv6 ready' title='ipv6 ready' border='0'
/></a>
</p></div></section><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/&#43;DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l&#43;B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd&#43;qj&#43;o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script></body>

</html>